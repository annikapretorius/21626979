---
output:
  md_document:
    variant: markdown_github
---

#Question 1 Solution 

#explanations of how i made the functions around in my each individual function in the given code folder

```{r setup, include=FALSE}

library(glue)
library(tidyverse)
library(stringr)
library(dplyr)
library(ggplot2)

# Source in all your functions:
list.files('Question_1/code/', full.names = T, recursive = T) %>% as.list() %>% walk(~source(.))

source("code/filter_and_arrange_baby_names.R")
source("code/prepare_HBO_data.R")
source("code/combine_top_25_names.R")
source("code/plot_total_baby_names_per_year_by_gender.R")
source("code/plot_top_25_name_proportions.R")
source("code/plot_name_persistence_heatmap.R")
source("code/calculate_correlation.R")
source("code/plot_correlation.R")
source("code/plot_HBO_name_persistence_summary.R")
source("code/plot_name_persistence_summary.R")

#Loading the Data 
Baby_Names <- readRDS("data/US_Baby_names/Baby_Names_By_US_State.rds")
charts <- readRDS("Data/US_Baby_names/charts.rds")
HBO_Titles <- readRDS("Data/US_Baby_names/HBO_titles.rds")
HBO_Credits <- readRDS("Data/US_Baby_names/HBO_credits.rds")

#Creating Different Datasets for Later Use
Baby_Names_df<- filter_and_arrange_baby_names(Baby_Names)
HBO_joined_df <- prepare_HBO_data(HBO_Titles, HBO_Credits)
combined_result_final_top_25_names <- combine_top_25_names(Baby_Names_df, HBO_joined_df, "Count", "tmdb_popularity")

Girl_Baby_Names_df <- Baby_Names_df %>% filter(Gender == "F")
Boy_Baby_Names_df <- Baby_Names_df %>% filter(Gender == "M")


```

# Analaysing the Persistence and Patterns of Baby Naming Conventions (Plot 1)

Plot Analysis: # Analaysing the Persistence and Patterns of Baby Naming Conventions 

The naming trends of children have long been a subject of fascination and study. Recently, a New York-based kids' toy design agency has expressed interest in leveraging data analytics to understand these trends better. The primary goal is to identify the factors that influence baby names, such as popular movie characters, US presidential candidates, celebrities, and top-ranking songs or artists. By comprehending these patterns, the agency aims to predict which character names might resonate best with children, thereby enhancing the appeal of their toys.

To facilitate this analysis, we have been provided with an extensive dataset of baby names in the US, spanning from 1910 to 2014. This dataset includes annual data for all US states, offering a comprehensive view of naming patterns over more than a century. Additionally, we have access to population data by state and city, which will help us generate proportional insights at the state level. To supplement our primary dataset, we have also compiled data on music, movies, and TV series, including the Top 100 Billboard songs since 1958 and HBO movie and series titles with their audience popularity scores.

One of the key aspects of our analysis involves examining the longevity and persistence of baby names. Specifically, we aim to determine whether popular names tend to persist over time or if they fade away as fleeting trends. A useful method for this investigation is the Spearman rank correlation, which will help us assess the rank similarity of the top 25 most popular boys' and girls' names from one year to the next three years. This will provide insights into whether the trends of popular names have become more or less persistent over the decades, particularly since the 1990s.

Analysing the plot: Figure \ref{Figure1} below shows the total count of baby names per year by gender. The blue line represents male names, while the red line represents female names. This visualization highlights the fluctuations in the popularity of baby names over time, offering a foundation for our deeper analysis of naming trends. 


```{r,  echo = FALSE, warning =  FALSE, fig.align = 'center', fig.cap = "Total Count of Baby Names by Gender.\\label{Figure1}", fig.ext = 'png', fig.height = 3, fig.width = 5}

total_baby_names_plot <- plot_total_baby_names_per_year_by_gender(Girl_Baby_Names_df, Boy_Baby_Names_df)
print(total_baby_names_plot )

```
to knit i used the following with every figure, adjusting for the name and figure number "{r,  echo = FALSE, warning =  FALSE, fig.align = 'center', fig.cap = "Total Count of Baby Names by Gender.\\label{Figure1}", fig.ext = 'png', fig.height = 3, fig.width = 5}" 

##Plot 2: 

Figure \ref{Figure2} below illustrates the proportion of the top 25 baby names over time for both female and male names.The horizontal axis represents the years from 1950 to 2014. The vertical axis represents the proportion of babies given a specific name each year. This is calculated as the count of babies with that name divided by the total count of babies for that year.Each line represents a specific name that was in the top 25 for that year. The color of each line corresponds to a different name. The plot is divided into two facets: one for female names and one for male names. This separation helps to compare the trends for female and male names independently.

+ Female Names: The left facet shows the proportion trends for the top 25 female names over time. The plot indicates that the popularity of the top names was relatively higher in the past (1950s to 1980s) and has become more evenly distributed in recent years.

+ Male Names: The right facet shows the proportion trends for the top 25 male names over time. Similar to female names, the plot indicates that the popularity of the top names was higher in the past and has become more evenly distributed in recent years. 

The peaks in the plot indicate years when specific names were particularly popular. The valleys indicate years when the popularity of those names decreased. Declining Trends: For both female and male names, the plot shows a general declining trend in the proportion values, indicating that the popularity of top names has become less concentrated over time. This suggests a diversification in naming trends, with a wider variety of names being used in recent years.


```{r,  echo = FALSE, warning =  FALSE, fig.align = 'center', fig.cap = "The Proportion of the Top 25 Baby Names and their Persistence Over Time\\label{Figure2}", fig.ext = 'png', fig.height = 4, fig.width = 6}

#The vertical axis represents the proportion of babies given a specific name each year. This is calculated as the count of babies with that name divided by the total count of babies for that year.

#This function visualizes the proportion of the top 25 baby names over time for both females and males. This helps to identify trends, patterns, and the persistence of popular baby names over the years.

top_name_proportions_plot<- plot_top_25_name_proportions(Girl_Baby_Names_df, Boy_Baby_Names_df)
top_name_proportions_plot
```


# Analysing the Persistence of Names over Time: A Time Series Analysis

Figure \ref{Figure3} below showcases the persistence of the most popular baby names from a given dataset. The color gradient from white to blue represents the presence of a name in the top 25 baby names for each year, with darker shades of blue indicating higher persistence. Notable names such as "Jessica," "Jennifer," and "Emily" show strong persistence over the years, particularly in the 1980s and 1990s.
Names like "Susan" and "Mary" were more popular in earlier decades, while "Ashley" and "Amanda" gained popularity later on.Names like "Robert," "Michael," and "John" demonstrate strong persistence, especially from the 1960s to the 2000s.
Other names such as "Matthew," "Joshua," and "Joseph" show high presence in the top 25 names in the 1980s and 1990s.
Male names show more consistent presence over a longer period compared to female names, which exhibit more variation and changes over the years.

```{r,  echo = FALSE, warning =  FALSE, fig.align = 'center', fig.cap = "The Proportion of the Top 25 Baby Names and their Persistence Over Time for both Genders\\label{Figure3}", fig.ext = 'png', fig.height = 4, fig.width = 6}

plot_baby_name_persistance<- plot_name_persistence_heatmap(Girl_Baby_Names_df, Boy_Baby_Names_df)
plot_baby_name_persistance

```

# Analyzing how long each name stayed in top 25 

```{r,  echo = FALSE, warning =  FALSE, fig.align = 'center', fig.cap = "The Number of Years the Top 25 Baby Names Persisted Over Time for both Genders\\label{Figure4}", fig.ext = 'png', fig.height = 4, fig.width = 6}

summary_name_persistance_plot<- plot_name_persistence_summary(Girl_Baby_Names_df, Boy_Baby_Names_df)
summary_name_persistance_plot

```

We can therefore see that the top boy names over the last few decades illustrate significant persistence in comparison to that of girl names, therefore, we will further analyse factors influencing girl names as they display significantly higher variability which could be linked to alternate factors.  

# Analysing the HBO Dataset

```{r,  echo = FALSE, warning =  FALSE, fig.align = 'center', fig.cap = "The Persistence of HBO names in the top rankings over time\\label{Figure5}", fig.ext = 'png', fig.height = 4, fig.width = 6}

HBO_name_persistence_plot <- plot_HBO_name_persistence(combined_result_final_top_25_names)
HBO_name_persistence_plot

```

We can see the above persistence is all male names within data regarding movies on HBO over the last few decades. 

# The Persistence of HBO names in the Top Rankings over Time.

In the Figure \ref{Figure6} below, the name "John" stands out as the most persistent name, having stayed in the top rankings for 40 years. This indicates that "John" was a popular name in HBO shows over a prolonged period. Names like "Robert," "Michael," "David," and "Richard" also exhibit high persistence, each maintaining their presence in the top rankings for over 20 years.The presence of these names over many years suggests a trend in character naming conventions in HBO shows. The recurrence of these names might reflect cultural preferences or character archetypes frequently used in HBO's storytelling.

The distribution of the years in top rankings shows that while some names had a very long presence, there is a gradual decline as we move down the list. Names like "Tom," "Peter," and "Jack," though still significant, have a lesser persistence compared to the top names.

The bar chart effectively highlights the relative persistence of each name, with the length of the bars corresponding to the number of years each name stayed in the top rankings. The use of horizontal bars makes it easy to compare the persistence across different names. This analysis helps in understanding the longevity and popularity of certain names within HBO shows, providing insights into naming trends and cultural influences over the years.


```{r,  echo = FALSE, warning =  FALSE, fig.align = 'center', fig.cap = "The Persistence of HBO names in the top rankings over time.\\label{Figure6}", fig.ext = 'png', fig.height = 4, fig.width = 6}

# Plot the persistence of HBO names
summary_HBO_persistance_plot<- plot_HBO_name_persistence_summary(combined_result_final_top_25_names)
summary_HBO_persistance_plot

```

Now i will analyse the correlation between the persistent boy names within the Baby names dataframe in comparison to that of the most persistent names within the HBO baby frame, which all happen to be male. 

```{r,  echo = FALSE, warning =  FALSE, fig.align = 'center', fig.cap = "The Correlation Between the Persistence of HBO names and Baby Names.\\label{Figure7}", fig.ext = 'png', fig.height = 4, fig.width = 6}

#This calls the calculate_correlation function, passing in the dataset combined_result_final_top_25_names.The purpose of this function is to calculate the persistence of names in both the baby names and HBO datasets, and then compute the Spearman correlation between these two persistence values.
result <- calculate_correlation(combined_result_final_top_25_names)

#Now i am extracting the combined_persistence data from the result of the calculate_correlation function.Combined_persistence contains the combined persistence data for both baby names and HBO names, which is necessary for further analysis and plotting.
combined_persistence <- result$combined_persistence

#This then extracts the correlation_value from the result of the calculate_correlation function. The correlation_value is the computed Spearman correlation between the persistence of baby names and HBO names. It quantifies the strength and direction of the association between the two datasets.

correlation_value <- result$correlation_value

#Finally the plot_correlation function is called, passing in the combined_persistence data and the correlation_value.The plot_correlation function generates a plot that visualizes the relationship between the persistence of baby names and HBO names, and it includes a regression line to illustrate the trend. This helps in visually interpreting the correlation.

correlation_plot <- plot_correlation(combined_persistence, correlation_value)

print(correlation_plot)
print(paste("Spearman correlation value: ", round(correlation_value, 2)))

```

In Figure \ref{Figure7} above the correlation between the persistence of baby names in the top 25 rankings and HBO names in the top 25 rankings over time are analysed. Each point on the scatter plot represents a name that appears in each of the datasets. The x-axis shows the number of years a name remained in the top 25 baby names, while the y-axis indicates the number of years the same name stayed in the top 25 HBO rankings.

A positive Spearman correlation value of `r round(correlation_value, 3)`. was calculated, which indicates a moderate positive correlation between the persistence of baby names and HBO names. This suggests that names that tend to be popular for longer periods as baby names are also likely to remain popular in HBO rankings for a significant duration. The blue line represents a linear fit, illustrating the trend of this correlation. While there is some spread in the data, with a number of outliers, the general trend suggests that there is a relationship between the duration of name popularity in both contexts.

##Question 2 Solution

```{r setup, include=FALSE}

# Load necessary libraries
library(ggplot2)
library(dplyr)
library(RColorBrewer)
library(tidyverse)

list.files('Question_2/code/', full.names = T, recursive = T) %>% as.list() %>% walk(~source(.))

#Loading the Data
coldplay <- read_csv("Data/Coldplay_vs_Metallica/Coldplay.csv")
metallica <- read_csv("Data/Coldplay_vs_Metallica/metallica.csv")
spotify <- readRDS("Data/Coldplay_vs_Metallica/Broader_Spotify_Info.rds")
billboard_100 <- readRDS("Data/Coldplay_vs_Metallica/charts.rds")

#Filtering the data so only studio produced songs are present
coldplay_filtered <- filter_coldplay_data(coldplay)

metallica_filtered <- filter_metallica_data(metallica)

# Combine the datasets for comparison
combined_band_data <- bind_rows(coldplay_filtered, metallica_filtered)

```

# An Analysis of the Music Industry \label{An Analysis of the Music Industry}

Coldplay and Metallica are two iconic bands that have left an indelible mark on the music industry. Coldplay, known for its atmospheric soundscapes and introspective lyrics, has captivated audiences worldwide since its debut in the early 2000s. In contrast, Metallica's powerful riffs and intense performances have made them a staple in the heavy metal genre since the 1980s. This project aims to compare the performance of these two bands using data from the Billboard Top 100 and Spotify, providing insights into their popularity and influence over time.

The analysis focuses on several key variables within the datasets. From the Billboard Top 100, we examine metrics such as the number of songs each band has placed in the Top 100, the peak rank achieved by these songs, and the total number of weeks they have remained on the chart. These metrics offer a comprehensive view of each band's commercial success and longevity in the music charts. On Spotify, we analyze the number of streams and popularity scores of their songs, providing a modern perspective on their relevance in the current digital music landscape. By comparing these variables, we can gain a deeper understanding of how Coldplay and Metallica have evolved over time and how their music continues to resonate with audiences today.


# Comparisons of the Bands Popularity\label{Comparisons of the Bands Popularity}


Coldplay and Metallica, though distinct in their musical styles, both enjoy significant popularity across their albums. Popularity in the figures below measure the popularity of the albums ranging form 0 to 100. The Data source from which this was taken is from spotify


```{r,  echo = FALSE, warning =  FALSE, fig.align = 'center', fig.cap = "Coldplay's Popularity per Album.\\label{Figure1}", fig.ext = 'png', fig.height = 5, fig.width = 7}

boxplot_popularity_coldplay<- popularity_boxplot(coldplay_filtered, xaxis_size = 10, xaxis_rows = 3)

boxplot_popularity_coldplay

```

```{r,  echo = FALSE, warning =  FALSE, fig.align = 'center', fig.cap = "Metallica's Popularity per Album.\\label{Figure2}", fig.ext = 'png', fig.height = 5, fig.width = 7}

popularity_boxplot_metallica<- popularity_boxplot(metallica_filtered, xaxis_size = 10, xaxis_rows = 3)

popularity_boxplot_metallica
```
As you can see from \ref{Figure1} and \ref{Figure2}, Coldplay and Metallica, despite having very different musical styles, both enjoy massive popularity across their albums. However as seen in \ref{Figure3} below, Coldplay is more popular overall than Metallica. 

```{r,  echo = FALSE, warning =  FALSE, fig.align = 'center', fig.cap = "Comparing both Band's Popularity\\label{Figure3}", fig.ext = 'png', fig.height = 5, fig.width = 7}

both_band_boxplot<- create_box_plot(combined_band_data, "popularity", "Popularity Comparison: Coldplay vs Metallica")
both_band_boxplot

```

# Density Plot of Popularity:

The density plot reveals the distribution of song popularity for Coldplay and Metallica. Coldplay's songs tend to have a more uniform distribution with a slight peak, indicating a consistent level of popularity across their catalog. Metallica, on the other hand, shows a more pronounced peak, suggesting that a significant number of their songs reach higher popularity scores. This contrast highlights how Metallica has a core set of extremely popular tracks, while Coldplay's popularity is more evenly spread across their discography. This plot helps us understand the different ways in which each band's music resonates with their listeners.

```{r,  echo = FALSE, warning =  FALSE, fig.align = 'center', fig.cap = "Density Plot of Popularity\\label{Figure4}", fig.ext = 'png', fig.height = 5, fig.width = 7}

#This function is designed to create a density plot that visualizes the distribution of a specified metric for Coldplay and Metallica. This helps to compare how the values of the given metric (e.g., popularity, energy, danceability) are distributed for each band.

density_plot_bands <- combined_density_plot(combined_band_data, "popularity", "Density Plot of Popularity: Coldplay vs Metallica")
density_plot_bands

```
# Scatter Plot of Energy vs Danceability:

The scatter plot of energy versus danceability, \ref{Figure5}, offers an insightful comparison between Coldplay and Metallica's musical styles. Coldplay's songs generally cluster towards the higher end of danceability, reflecting their melodic and rhythmic compositions designed to be both catchy and uplifting. In contrast, Metallica's tracks tend to score higher on energy but lower on danceability, showcasing their intense sound that's characteristic of heavy metal. This scatter plot effectively illustrates the distinct musical signatures of each band, highlighting Coldplay's tendency towards more danceable tunes and Metallica's focus on high-energy, powerful performances.

```{r,  echo = FALSE, warning =  FALSE, fig.align = 'center', fig.cap = "Energy versus Danceability\\label{Figure5}", fig.ext = 'png', fig.height = 5, fig.width = 7}

#This function is designed to create a scatter plot that visualizes the relationship between two specified metrics for Coldplay and Metallica. This helps compare how these metrics (e.g., like I did here energy and danceability) correlate for each band.

scatterplot_danceability_energy <- combined_scatter_plot(combined_band_data, "energy", "danceability", "Energy vs Danceability: Coldplay vs Metallica")
scatterplot_danceability_energy

```
# Analysing the Billboard Top 100

Coldplay and Metallica have both spent a lot of time on the Billboard Top 100, showing their lasting popularity. Coldplay's songs, with their emotional and melodic style, have kept them on the charts for many weeks. Metallica's powerful and energetic tracks have also secured them a strong presence, especially in the rock and metal genres. The bar plot below clearly shows that while both bands have had substantial success, their chart performance underscores their ability to engage listeners and sustain their popularity over extended periods. This analysis provides a compelling visual representation of the lasting impact both bands have had on the music industry.

```{r,  echo = FALSE, warning =  FALSE, fig.align = 'center', fig.cap = "The Billboard 100s Results for both bands\\label{Figure6}", fig.ext = 'png', fig.height = 5, fig.width = 7}

# Filter the Billboard dataset for Coldplay and Metallica
billboard_filtered_data <- filter_billboard_for_bands(billboard_100)

#This function is designed to create a bar plot that visualizes the total number of weeks Coldplay and Metallica have spent on the Billboard Top 100. This helps compare the overall chart presence of each band.

billboard_boxplot <- bar_plot_billboard_weeks(billboard_filtered_data)
billboard_boxplot

```
# Conclusion

In conclusion, Coldplay and Metallica have demonstrated remarkable longevity and musical progression over the years. Coldplay's ability to evolve their sound while maintaining their signature emotional and melodic style has kept them relevant and popular. Similarly, Metallica's consistent delivery of powerful, energetic music has solidified their place in the heavy metal genre. Both bands have shown that they can adapt and thrive in the ever-changing music industry, securing a lasting legacy through their continuous presence on the charts and streaming platforms.
